{"ast":null,"code":"import _regeneratorRuntime from\"/Users/brantleymorris/Documents/BC_Classwork/book_search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/brantleymorris/Documents/BC_Classwork/book_search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/brantleymorris/Documents/BC_Classwork/book_search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import{useStateContext}from\"../../utils/GlobalState\";import{Container,Row,Col}from\"../Grid\";import{List,ListItem}from\"../List\";import API from\"../../utils/API\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchResults=function SearchResults(){var _useStateContext=useStateContext(),_useStateContext2=_slicedToArray(_useStateContext,2),state=_useStateContext2[0],dispatch=_useStateContext2[1];var addSaved=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var filteredData,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"save was clicked\");_context.prev=1;// filter data\nfilteredData={title:data.title,author:data.authors[0],description:data.description,image:data.imageLinks.smallThumbnail,link:data.infoLink};_context.next=5;return API.saveBook(filteredData);case 5:response=_context.sent;console.log(response);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 12:;case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function addSaved(_x){return _ref.apply(this,arguments);};}();return state&&state.posts&&state.posts.length?state.posts.map(function(result){return/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{size:\"md-3\",children:/*#__PURE__*/_jsx(\"img\",{src:result.volumeInfo.imageLinks.smallThumbnail})}),/*#__PURE__*/_jsx(Col,{size:\"md-9\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[result.volumeInfo.title,\" by \",result.volumeInfo.authors.join(\",\")]})}),result.volumeInfo.description?/*#__PURE__*/_jsx(Row,{children:result.volumeInfo.description.substring(0,250)/*only load 250 characters*/}):/*#__PURE__*/_jsx(Row,{children:\"No description available.\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){return addSaved(result.volumeInfo);},children:\"\\u2764\\uFE0F Add to Saved\"}),/*#__PURE__*/_jsx(\"a\",{href:result.volumeInfo.infoLink,target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",children:\"View\"})})]})]})})]})})},result.id);}):/*#__PURE__*/_jsx(\"h3\",{children:\"Search for a book to see results.\"});};export default SearchResults;","map":{"version":3,"sources":["/Users/brantleymorris/Documents/BC_Classwork/book_search/client/src/components/SearchResults/index.js"],"names":["React","useEffect","useStateContext","Container","Row","Col","List","ListItem","API","SearchResults","state","dispatch","addSaved","data","console","log","filteredData","title","author","authors","description","image","imageLinks","smallThumbnail","link","infoLink","saveBook","response","posts","length","map","result","volumeInfo","join","substring","id"],"mappings":"+hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,eAAT,KAAgC,yBAAhC,CACA,OAASC,SAAT,CAAoBC,GAApB,CAAyBC,GAAzB,KAAoC,SAApC,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,SAA/B,CACA,MAAOC,CAAAA,GAAP,KAAgB,iBAAhB,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,sBAEEP,eAAe,EAFjB,sDAEjBQ,KAFiB,sBAEVC,QAFU,sBAIxB,GAAMC,CAAAA,QAAQ,0FAAG,iBAAOC,IAAP,4IACbC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADa,gBAGT;AACMC,YAJG,CAIY,CACjBC,KAAK,CAAEJ,IAAI,CAACI,KADK,CAEjBC,MAAM,CAAEL,IAAI,CAACM,OAAL,CAAa,CAAb,CAFS,CAGjBC,WAAW,CAAEP,IAAI,CAACO,WAHD,CAIjBC,KAAK,CAAER,IAAI,CAACS,UAAL,CAAgBC,cAJN,CAKjBC,IAAI,CAAEX,IAAI,CAACY,QALM,CAJZ,uBAYcjB,CAAAA,GAAG,CAACkB,QAAJ,CAAaV,YAAb,CAZd,QAYHW,QAZG,eAcTb,OAAO,CAACC,GAAR,CAAYY,QAAZ,EAdS,+EAiBTb,OAAO,CAACC,GAAR,cAjBS,QAkBZ,CAlBY,oEAAH,kBAARH,CAAAA,QAAQ,4CAAd,CAqBA,MACIF,CAAAA,KAAK,EAAIA,KAAK,CAACkB,KAAf,EAAwBlB,KAAK,CAACkB,KAAN,CAAYC,MAApC,CACQnB,KAAK,CAACkB,KAAN,CAAYE,GAAZ,CAAgB,SAAAC,MAAM,qBAClB,KAAC,QAAD,wBACI,KAAC,SAAD,wBACI,MAAC,GAAD,yBACI,KAAC,GAAD,EAAK,IAAI,CAAC,MAAV,uBACI,YAAK,GAAG,CAAEA,MAAM,CAACC,UAAP,CAAkBV,UAAlB,CAA6BC,cAAvC,EADJ,EADJ,cAII,KAAC,GAAD,EAAK,IAAI,CAAC,MAAV,uBACI,MAAC,SAAD,yBACI,KAAC,GAAD,wBACI,0BACKQ,MAAM,CAACC,UAAP,CAAkBf,KADvB,QACkCc,MAAM,CAACC,UAAP,CAAkBb,OAAlB,CAA0Bc,IAA1B,CAA+B,GAA/B,CADlC,GADJ,EADJ,CAMKF,MAAM,CAACC,UAAP,CAAkBZ,WAAlB,cACG,KAAC,GAAD,WACKW,MAAM,CAACC,UAAP,CAAkBZ,WAAlB,CAA8Bc,SAA9B,CAAwC,CAAxC,CAA0C,GAA1C,CAA+C,4BADpD,EADH,cAKG,KAAC,GAAD,wCAXR,cAeI,MAAC,GAAD,yBACI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAG,yBAAMtB,CAAAA,QAAQ,CAACmB,MAAM,CAACC,UAAR,CAAd,EAAlC,uCADJ,cAII,UAAG,IAAI,CAAED,MAAM,CAACC,UAAP,CAAkBP,QAA3B,CAAqC,MAAM,CAAC,QAA5C,CAAqD,GAAG,CAAC,qBAAzD,uBACI,eAAQ,SAAS,CAAC,mBAAlB,kBADJ,EAJJ,GAfJ,GADJ,EAJJ,GADJ,EADJ,EAAeM,MAAM,CAACI,EAAtB,CADkB,EAAtB,CADR,cA2CI,yDA5CR,CA+CH,CAxED,CA0EA,cAAe1B,CAAAA,aAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useStateContext } from \"../../utils/GlobalState\";\nimport { Container, Row, Col } from \"../Grid\";\nimport { List, ListItem } from \"../List\";\nimport API from \"../../utils/API\";\n\nconst SearchResults = () => {\n\n    const [state, dispatch] = useStateContext();\n\n    const addSaved = async (data) => {\n        console.log(\"save was clicked\");\n        try {\n            // filter data\n            const filteredData = {\n                title: data.title,\n                author: data.authors[0],\n                description: data.description,\n                image: data.imageLinks.smallThumbnail,\n                link: data.infoLink\n            };\n\n            const response = await API.saveBook(filteredData);\n\n            console.log(response);\n\n        } catch (err) {\n            console.log(err)\n        };\n    };\n\n    return (\n        state && state.posts && state.posts.length ? (\n                state.posts.map(result =>\n                    <ListItem key={result.id}>\n                        <Container>\n                            <Row>\n                                <Col size=\"md-3\">\n                                    <img src={result.volumeInfo.imageLinks.smallThumbnail} />\n                                </Col>\n                                <Col size=\"md-9\">\n                                    <Container>\n                                        <Row>\n                                            <strong>\n                                                {result.volumeInfo.title} by {result.volumeInfo.authors.join(\",\")}\n                                            </strong>\n                                        </Row>\n                                        {result.volumeInfo.description ? (\n                                            <Row>\n                                                {result.volumeInfo.description.substring(0,250) /*only load 250 characters*/} \n                                            </Row>\n                                            ) : (\n                                            <Row>\n                                                No description available.    \n                                            </Row>\n                                        )}\n                                        <Row>\n                                            <button className=\"btn\" onClick={ () => addSaved(result.volumeInfo)}>\n                                                ❤️ Add to Saved\n                                            </button>\n                                            <a href={result.volumeInfo.infoLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                                                <button className=\"btn btn-secondary\">\n                                                    View\n                                                </button>\n                                            </a>\n                                        </Row>\n                                    </Container>\n                                </Col>\n                            </Row>\n                        </Container>\n                    </ListItem>\n                )\n\n            \n        ) : (\n            <h3>Search for a book to see results.</h3>\n        )\n    );\n};\n\nexport default SearchResults;"]},"metadata":{},"sourceType":"module"}